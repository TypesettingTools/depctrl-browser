---
pagination:
    data: modules
    size: 1
    alias: moduleList
permalink: "/modules/{{ (moduleList | first)._namespace }}/"
layout: base.njk
eleventyComputed:
  title: "{{ (moduleList | first).name }}"
  description: "{{ (moduleList | first).description }}"
  author: "{{ (moduleList | first).author }}"
---
{% for module in moduleList %}
  <h2>{{ module.name }}</h2>
  <p>{{ module.description }}</p>
  <p>Module <a href="{{ module.url }}">{{ module._namespace }}</a> in feed <a href="{{ ["/feeds/" , module._feedIdentifier, "/"] | join | url }}">{{ module._feedName }}</a> <small>[{{ module._feedIdentifier }}]</small> by {{ module.author }}.</p>

  <h3>Channels:</h3>
  {% for channel, info in module.channels %}
  <article>
  <h4>{{ channel }}{% if info.default %}<small> (Default)</small>{% endif %}:</h4>
  <p>Version {{ info.version }}
  {% if info.released %} released {{ info.released }}{% endif %}
  {% if info.platforms %} for {{ info.platforms | join(', ') }}{% endif %}
  </p>
  <details {% if info.default %}open{% endif %}>
    <summary>Required Modules</summary>
    <p>
      {% for module in info.requiredModules %}
        <li>
          <tt>{{ module.moduleName }}{% if module.version %}@{{ module.version }}{% endif %}</tt>
          {% if module.name %}({{ module.name }}){% endif %}
          {% if module.url %} <small>[<a href="{{ module.url }}">URL</a>]</small> {% endif %}
          {% if module.feed %} <small>[<a href="{{ module.feed }}">Feed</a>]</small> {% endif %}
        </li>
      {% else %}
        No modules required
      {% endfor %}
    </p>
  </details>
  <details {% if info.default %}open{% endif %}>
    <summary>Files</summary>
    <p>
      {% for file in info.files %}
        {% if not file.delete %}<li>
          <a href="{{ file.url }}">{{ file.name }}</a>:
          {% if file.type %} <small>[{{ file.type }}]</small> {% endif %}
          {% if file.platform %} <small>[{{ file.platform }}]</small> {% endif %}
          <small><code>{{ file.sha1 }}</code></small>
          {% if file._validHash %} ✅ {% else %} ❌ {% endif %}
        </li>{% endif %}
      {% else %}
        Module containes no files
      {% endfor %}
    </p>
  </details>
  </article>
  {% endfor %}

  <details open>
    <summary>Changelog</summary>
    <p>
      {% for version, changelog in module.changelog | changelogSort %}
        <p><b>{{ version }}:</b> <br>
        {% for changelogLine in changelog %}
          <li>{{ changelogLine | markdownify | safe }}</li>
        {% endfor %}
        </p>
      {% else %}
        No changelog Available
      {% endfor %}
    </p>
  </details>
  {% if not loop.last %}<hr>{% endif %}

  <br><br><p><small style="color: DimGrey;">Last fetched: {{ module._fetchTime | datetime }}</small></p>
{% endfor %}
